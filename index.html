<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DYPBOT Visualizer - Flux.2 Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --blue: #00d2ff; --purple: #3a7bd5; --glass: rgba(255, 255, 255, 0.05); }
        * { margin:0; padding:0; box-sizing:border-box; }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        body { background: radial-gradient(circle at top right, #0f172a, #020617, #000); color: #fff; font-family: 'Plus Jakarta Sans', sans-serif; min-height: 100vh; padding: 40px 15px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 800px; }
        .main-card { background: var(--glass); backdrop-filter: blur(40px); border: 1px solid rgba(255,255,255,0.12); border-radius: 35px; padding: 30px; animation: float 6s infinite ease-in-out; box-shadow: 0 40px 100px rgba(0,0,0,0.8); }
        .visual-frame { width: 100%; height: 400px; background: rgba(0,0,0,0.4); border-radius: 25px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; overflow: hidden; border: 1px solid rgba(255,255,255,0.05); }
        .visual-frame img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .dash-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 20px 0; }
        .stat-box { background: rgba(0,0,0,0.4); padding: 15px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.08); text-align: center; }
        .stat-box b { color: var(--blue); font-size: 0.9rem; }
        .stat-box span { font-size: 0.6rem; color: #64748b; text-transform: uppercase; }
        .input-wrapper { display: flex; background: rgba(0,0,0,0.6); padding: 8px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); gap: 10px; }
        input { flex: 1; background: transparent; border: none; padding: 10px 15px; color: #fff; outline: none; }
        button { background: linear-gradient(135deg, var(--blue), var(--purple)); border: none; padding: 10px 25px; border-radius: 15px; color: #fff; font-weight: 800; cursor: pointer; transition: 0.3s; }
        button:disabled { opacity: 0.5; }
        #status-text { margin-top: 15px; font-family: monospace; font-size: 0.8rem; color: var(--blue); text-align: center; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <header style="text-align: center; margin-bottom: 30px;">
            <h1 style="font-size: 2rem; letter-spacing: 3px; background: linear-gradient(to right, #fff, var(--blue)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">DYPBOT VISUALIZER</h1>
        </header>
        <div class="main-card">
            <div class="visual-frame"><img id="outputImage" src="https://via.placeholder.com/800x450/000000/00d2ff?text=READY+FOR+INPUT" alt="Visual Output"></div>
            <div class="dash-grid">
                <div class="stat-box"><span>Engine</span><br><b>FLUX.2 PRO</b></div>
                <div class="stat-box"><span>Status</span><br><b id="engineStatus">READY</b></div>
                <div class="stat-box"><span>Node</span><br><b>Online</b></div>
            </div>
            <div class="input-wrapper">
                <input type="text" id="promptInput" placeholder="Ketik deskripsi gambar di sini...">
                <button id="genBtn" onclick="generate()">GENERATE</button>
            </div>
            <div id="status-text">SYSTEM: PROCESSING_PIXELS...</div>
        </div>
    </div>

    <script>
        const API_KEY = "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";
        async function generate() {
            const prompt = document.getElementById('promptInput').value;
            const btn = document.getElementById('genBtn');
            const img = document.getElementById('outputImage');
            const status = document.getElementById('engineStatus');
            const loader = document.getElementById('status-text');

            if(!prompt) return alert("Isi dulu deskripsinya!");

            btn.disabled = true;
            status.innerText = "BUSY";
            loader.style.display = "block";
            img.style.opacity = "0.5";

            try {
                const r = await fetch("https://openrouter.ai/api/v1/chat/completions", {
                    method: "POST",
                    headers: {
                        "Authorization": `Bearer ${API_KEY}`,
                        "Content-Type": "application/json",
                        "X-Title": "DYPBOT"
                    },
                    body: JSON.stringify({
                        "model": "black-forest-labs/flux.1-pro", // Flux 2 pro biasanya menggunakan endpoint ini
                        "messages": [{"role": "user", "content": prompt}]
                    })
                });
                const d = await r.json();
                const content = d.choices[0].message.content;
                const url = content.match(/https?:\/\/[^\s\)]+/g)[0];
                
                if(url) {
                    img.src = url;
                    img.style.opacity = "1";
                    status.innerText = "READY";
                }
            } catch(e) {
                alert("Gagal memproses gambar. Pastikan kuota API masih ada.");
                status.innerText = "ERROR";
            } finally {
                btn.disabled = false;
                loader.style.display = "none";
            }
        }
    </script>
</body>
</html>
